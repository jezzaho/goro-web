<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Rozkładacz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!--  HEAD FOR MDC -->

    
    <!-- Optional: Add some custom styles -->
    <style>
      body {
  
        background: rgb(63, 78, 127);
        background: linear-gradient(
        228deg,
        rgba(63, 78, 127, 1) 0%,
        rgba(119, 199, 197, 1) 100%
      );
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    </style>
    
</head>
<body>
    <style>
      .radio-group .radio:first-child{
        border-top-left-radius: 0.5rem;
        border-bottom-left-radius: 0.5rem;
      }
      
      .radio-group .radio:last-child{
        border-top-right-radius: 0.5rem;
        border-bottom-right-radius: 0.5rem;
      }
      
      .radio-group .radio{
        position: relative;
      }
      
      .radio input{
        visibility: hidden;
        position: absolute;
      
      }
      
      .radio label:hover{
        cursor: pointer;
      }
      
      .radio input:checked + label{
        border-color:#38C172;
        background-color:#E3FCEC;
      }
    </style>
    <body>
        <!-- Loading overlay -->
<div class="card-container container bg-white mx-auto my-16 flex w-3/5 flex-col flex-nowrap">
  <div class="introduction-container ">
    <div class="title-container text-center text-3xl font-bold">
      <h1>Rozkładacz</h1>
    </div>
    <div class="paragraph-container text-center">
      <p>
        Celem pobrania rozkładu wybranego przewoźnika w zadanym przedziale czasowym, wybierz odpowiednie pola ponizej. <br />
        Na ten moment rozkładacz pozwala na pobranie jednego rozkładu jednej linii w pojedynczym zapytaniu. <br />
        Czas pobrania rozkładu wynosi ok. 20-30 sekund i jest ograniczony przez limit API Lufthansy.
      </p>
    </div>
  </div>
  <form id="downloadForm" onsubmit="return handleDownload(event)" method="POST" enctype="application/x-www-form-urlencoded">
    <div class="form-label text-center font-bold mt-4">
      <label for="carrier">Linia Lotnicza: </label>
    </div>
    <div class="container mx-auto mt-6 mb-6 flex justify-center">
      <div class="radio-group inline-flex flex-1 flex-initial flex-row justify-center rounded-lg shadow-md">
        <div class="radio carrier-element w-1/3 mx-1">
          <input type="radio" id="LH" name="carrier" value="LH" checked />
          <label for="LH" class="border-grey block flex h-32 w-32 flex-col items-center gap-2 border border-2 border-solid bg-white px-4 py-3 text-center"
            ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 192.756 192.756">
              <g fill-rule="evenodd" clip-rule="evenodd">
                <path fill="none" d="M0 0h192.756v192.756H0V0z" style="background: transparent;" />
                <path fill="none" d="M0 0h192.756v192.756H0V0z" />
                <path d="M96.377 5.379c50.009 0 90.966 41.021 90.966 91.031 0 49.945-40.957 90.967-90.966 90.967-50.009 0-90.966-40.957-90.966-90.967 0-50.009 40.958-91.031 90.966-91.031z" />
                <path d="M96.314 10.644c-24.074 0-47.506 10.464-63.684 28.375-14.059 15.6-21.955 36.271-21.955 57.328 0 24.074 10.4 47.506 28.311 63.619 15.664 14.123 36.335 22.02 57.328 22.02 24.073 0 47.504-10.4 63.618-28.311 14.125-15.664 22.021-36.336 22.021-57.328 0-24.138-10.4-47.57-28.311-63.683-15.665-14.06-36.271-22.02-57.328-22.02z" fill="#fff" />
                <path d="M17.544 72.915l1.99-3.531 10.271 5.2 2.247-3.916 39.609 22.34-1.027 1.862-23.046-11.235c8.859 7.896 19.773 16.306 32.227 16.306 14.379 0 25.935-11.363 32.226-23.368 3.275-.257 6.549-.514 9.887-.514 16.756 0 34.152 3.273 50.268 7.96l5.52 1.605 1.477.386-4.814 4.172c-14.316-4.108-29.08-7.318-43.975-8.217l-1.67 2.375c12.135.834 24.268 2.953 36.016 6.034l4.172 1.092 3.018.77-4.814 4.108c-13.803-3.723-28.119-6.355-42.498-6.419l-1.477 1.862c14.188.513 27.99 3.081 41.791 6.356l-4.494 3.787c-13.609-2.826-27.283-4.559-41.213-4.752l-1.412 1.926h2.76c11.363 0 22.854 1.67 33.961 3.98l3.723.836-4.688 3.916c-8.344-1.605-16.818-2.633-25.357-2.633-11.17 0-22.66 2.055-32.804 6.869 12.069 13.354 28.696 24.459 47.313 24.459h.191l-6.033 6.805c-22.598-6.869-43.398-18.295-62.656-31.842-10.593-7.447-20.415-16.048-31.072-23.431-7.383-5.072-14.894-9.694-22.854-13.738l-2.763-1.41z" />
              </g>
            </svg>
            <strong class="text-[11px] mt-[6px]">Lufthansa</strong><span class="block">LH</span>
          </label>
        </div>
        <div class="radio carrier-element w-1/3 mx-1">
          <input type="radio" id="OS" name="carrier" value="OS" />
          <label for="OS" class="border-grey block flex h-32 w-32 flex-col items-center gap-2 border border-2 border-solid bg-white px-4 py-3 text-center"
            ><svg xmlns="http://www.w3.org/2000/svg" data-di-res-id="871aceeb-f87834ca" data-di-rand="1668888693019" viewBox="0 0.85 250.68 36.17"     height="32" width="110">                    <g fill="none" fill-rule="evenodd">                        <path d="M117 37h11v-2.699l-1.876-.216c-1.065-.109-1.316-.252-1.316-3.427V12l-7.647.906v2.512l1.11.195c1.388.246 1.967.683 1.967 2.733v12.312c0 3.043-.194 3.268-1.55 3.427l-1.688.219V37" fill="#D81E05" style="--darkreader-inline-fill: #fa4d36;" data-darkreader-inline-fill=""/>                        <path d="M0 .856h250.663v36.01H0z"/>                        <path d="M122.009 1.844c-1.775 0-2.837 1.03-2.837 2.752 0 1.77 1.062 2.825 2.837 2.825 1.826 0 2.871-1.029 2.871-2.825 0-1.723-1.074-2.752-2.871-2.752M10.671 21.934L15.417 8.92l4.65 13.014H10.67zm20.566 11.753c-1.251-.27-1.583-.57-2.564-3.409L17.887.856h-2.682L3.931 30.726c-.657 1.9-.982 2.681-2.403 2.919L0 33.853v2.644h10.019v-2.651l-3.548-.383 3.022-8.292h11.732l2.95 8.252-3.494.425v2.649h11.927v-2.649l-1.37-.16zM98.102 36.497h11.77V33.94l-2.874-.351c-1.012-.105-1.28-.26-1.28-3.322V18.333l.029-.047c.813-1.056 2.266-1.794 3.526-1.794 1.603 0 3.113.353 4.384 1.024v-5.424a6.89 6.89 0 0 0-2.262-.392c-2.109 0-4.025 1.052-5.865 3.215l-.192.226-.478-2.933H97.92v3.007l1.236.212c1.337.233 1.974.707 1.974 2.778v12.062c0 3.134-.246 3.264-1.554 3.413l-1.473.168v2.649M94.187 32.385c-1.218.618-2.436.929-3.621.929-1.481 0-2.467-.618-2.467-3.64V15.476h5.794v-3.272h-5.794V6.493h-2.81l-1.501 5.715h-3.69v3.268h3.41v14.838c0 4.498 1.805 6.686 5.524 6.686 2.962 0 5.274-1.262 6.389-2.015l.203-.135-1.172-2.597-.265.132M57.45 33.864l-1.391-.226c-1.366-.23-1.974-.687-1.974-2.776V12.208H46.29v3.007l1.23.212c1.339.233 1.975.707 1.975 2.778V30.93l-.064.042c-1.998 1.229-4.11 1.933-5.792 1.933-2.664 0-3.96-1.61-3.96-4.919V12.208h-7.763v3.011l1.198.208c1.338.233 1.977.707 1.977 2.778v10.237c0 3.903 1.215 8.558 7.012 8.558 2.712 0 5.076-1.007 7.669-3.268l.183-.161.522 2.915h6.973v-2.622M143.55 28.99c0 2.64-1.846 4.415-4.592 4.415-1.642 0-3.597-.6-3.597-3.456 0-3.158 2.03-4.27 8.045-4.411l.144-.002v3.454zm7.53 4.827l-1.435-.181c-1.335-.155-1.55-.314-1.55-2.137V20.033c0-5.76-2.124-8.333-7.477-8.333-3.537 0-6.716 1.278-8.51 2.472l-.19.125.992 2.734.274-.114c2.628-1.09 4.236-1.44 6.621-1.44 2.92 0 3.745 1.272 3.745 4.692v2.237l-.133.005c-8.002.362-12.963 1.81-12.963 7.903 0 3.049 1.24 6.686 7.15 6.686 3.62 0 5.603-1.922 6.29-2.75l.16-.194.077.242c.584 1.794 1.926 2.702 3.995 2.702 1.112 0 2.01-.183 2.954-.606v-2.577zM69.414 21.813c-2.472-.688-4.488-1.418-4.488-3.61 0-2.082 1.557-3.183 4.501-3.183 2.68 0 3.086.718 3.294 1.519l.725 2.836H76.7V13.31c-1.587-.991-4.257-1.609-6.999-1.609-5.496 0-9.046 2.893-9.046 7.371 0 4.608 3.343 5.778 6.537 6.633.219.058 1.167.306 1.417.373 2.516.678 4.554 1.436 4.554 3.915 0 3.046-2.595 3.688-4.77 3.688-3.36 0-3.825-.803-4.055-1.771l-.634-3.302h-3.272v6.617c1.505.82 4.048 1.774 7.733 1.774 4.55 0 9.406-2.094 9.406-7.966 0-4.64-3.574-5.946-6.753-6.834-.246-.07-1.183-.324-1.404-.385M168.697 36.497h10.73v-2.653l-1.834-.264c-1.318-.157-1.552-.42-1.552-3.37v-9.947c0-5.681-2.421-8.563-7.194-8.563-3.573 0-6.004 1.732-7.722 3.237l-.197.172-.353-2.9h-6.796v3.041l1.021.177c1.338.233 1.974.707 1.974 2.778v12.006c0 2.99-.194 3.208-1.556 3.369l-1.696.212v2.705h10.687v-2.653l-1.506-.22c-1.25-.187-1.34-.409-1.34-3.413V17.77l.07-.04c2.022-1.246 4.109-1.935 5.88-1.935 2.823 0 4.138 1.537 4.138 4.832v9.856c0 2.731-.101 2.997-1.2 3.14l-1.554.22v2.653M195.057 30.951c8.264-6.697 14.166-12.435 15.924-15.546.747-1.2.986-2.347.572-3.282-.771-1.74-3.493-2.268-6.85-1.615a261.096 261.096 0 0 1 45.675-6.145.277.277 0 0 1 .095.54c-19.461 6.325-37.175 16.573-52.226 29.829a.137.137 0 0 1-.064.033l-9.796 1.718c-.137.025-.21-.154-.1-.24a260.485 260.485 0 0 0 6.77-5.292" fill="#D81E05" style="--darkreader-inline-fill: #ad1804;" data-darkreader-inline-fill=""/>                        <path class="o-header-austrian-logo-fold" d="M193.745 13.117c-.217.06-.435.118-.654.182-.129.034-.118.224.017.243l3.711.531 6.482.926a.144.144 0 0 0 .074-.012c4.563-2.177 7.605-3.017 8.274-2.067.207.294.171.745-.071 1.33-.083.197-.19.407-.317.635.713-1.134.941-2.219.547-3.103-.737-1.646-3.336-2.145-6.552-1.525a251.12 251.12 0 0 0-11.51 2.86" fill="#93282C" style="--darkreader-inline-fill: #d87074;" data-darkreader-inline-fill=""/>                    </g>                </svg>
            <strong><span class="text-[11px]">Austrian Airlines</strong><span class="block">OS</span>
            </label
          >
        </div>
        <div class="radio carrier-element w-1/3 mx-1">
          <input type="radio" id="LX" name="carrier" value="LX" />
          <label for="LX" class="border-grey block flex h-32 w-32 flex-col items-center gap-2 border border-2 border-solid bg-white px-4 py-3 text-center"
            >
            <svg
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   id="svg3079"
   version="1.1"
   height="32"
   viewBox="5 -5 310.71 82.14">
  <defs
     id="defs3081" />
  <path
     style="fill:#cc0000;fill-opacity:1"
     id="path3059"
     d="M 224.357,63.727 H 212.832 V 19.348 h 11.525 v 44.379 z m -27.282,-44.379 -7.417,29.743 -8.682,-29.743 h -11.141 l -8.674,29.743 -7.437,-29.743 h -11.262 l 12.253,44.379 h 11.896 l 8.786,-30.438 8.787,30.438 h 11.892 L 208.367,19.348 H 197.075 z M 141.5,51.18 c 0,-8.507 -4.512,-11.358 -14.385,-14.578 -4.652,-1.518 -8.996,-2.683 -8.996,-6.299 0,-3.175 3.227,-4.228 5.638,-4.228 2.046,0 5.888,0.434 6.199,5.141 h 10.896 c -0.19,-8.986 -7.498,-12.899 -16.902,-12.899 -5.831,0 -10.647,1.651 -13.682,4.638 -2.118,2.088 -3.408,5.147 -3.408,8.33 0,8.261 5.521,11.573 11.756,13.47 7.007,2.14 11.642,3.415 11.642,7.273 0,2.577 -2.04,5.144 -6.073,5.144 -5.124,0 -6.985,-3.059 -7.108,-6.063 h -11.025 c 0,10.227 8.62,13.965 18.133,13.965 12.149,0 17.315,-6.915 17.315,-13.894 m 123.62,0 c 0,-9.789 -7.123,-12.373 -15.729,-14.943 -4.149,-1.224 -7.875,-2.317 -7.875,-5.934 0,-3.175 3.227,-4.228 5.64,-4.228 2.051,0 5.879,0.434 6.187,5.141 h 10.906 c -0.188,-8.986 -7.488,-12.899 -16.912,-12.899 -5.82,0 -10.656,1.651 -13.675,4.638 -2.105,2.088 -3.404,5.147 -3.404,8.33 0,8.261 5.507,11.573 11.765,13.47 7,2.14 11.642,3.415 11.642,7.273 0,2.577 -2.037,5.144 -6.067,5.144 -5.144,0 -7.006,-3.059 -7.119,-6.063 H 229.45 c 0,10.227 8.613,13.965 18.146,13.965 12.13,0 17.524,-6.915 17.524,-13.894 m 39.648,0 c 0,-9.789 -7.153,-12.373 -15.753,-14.943 -4.16,-1.224 -7.861,-2.317 -7.861,-5.934 0,-3.175 3.209,-4.228 5.622,-4.228 2.037,0 5.882,0.434 6.196,5.141 H 303.9 c -0.191,-8.986 -7.526,-12.899 -16.922,-12.899 -5.824,0 -10.658,1.651 -13.699,4.638 -2.103,2.088 -3.395,5.147 -3.395,8.33 0,8.261 5.51,11.573 11.751,13.47 7.007,2.14 11.646,3.415 11.646,7.273 0,2.577 -2.037,5.144 -6.067,5.144 -5.134,0 -6.993,-3.059 -7.116,-6.063 h -11.033 c 0,10.227 8.609,13.965 18.149,13.965 12.161,0 17.554,-6.915 17.554,-13.894" />
  <polygon
     style="fill:#cc0000;fill-opacity:1"
     id="polygon3061"
     transform="translate(0,-0.004001)"
     points="61.135,6.941 98.492,6.941 81.404,76.292 5.511,76.292 " />
  <polygon
     style="fill:#ffffff;"
     id="polygon3063"
     transform="translate(0,-0.004001)"
     points="69.792,48.012 84.723,48.012 84.723,35.218 69.792,35.218 69.792,20.285 56.991,20.285 56.991,35.218 42.06,35.218 42.06,48.012 56.984,48.012 56.984,62.948 69.781,62.948 69.781,48.012 " />
</svg>

            <strong><span  class="text-[11px]">Swiss</strong><span class="block">LX</span>
            </label
          >
        </div>
        <div class="radio carrier-element w-1/3 mx-1">
          <input type="radio" id="SN" name="carrier" value="SN" />
          <label for="SN" class="border-grey block flex h-32 w-32 flex-col items-center gap-2 border border-2 border-solid bg-white px-4 py-3 text-center"><?xml version="1.0" encoding="UTF-8"?>
<svg  height="32" width="64" viewBox="0 0 95 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="translate scale-150 mt-[5px]">
    <title>logo/brussels-airlines/brussels_ailines_logo_full_colored</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="BAIR_the_loft" transform="translate(-172.000000, -33.000000)" fill-rule="nonzero">
            <g id="logo/brussels-airlines/brussels_ailines_logo_full_colored" transform="translate(172.142857, 33.587159)">
                <g id="brussels_ailines_text" transform="translate(0.000000, 0.149984)" fill="#051446">
                    <path d="M36.2667492,19.8180518 L35.6387181,19.8180518 L35.2829078,18.8608501 L33.6473638,18.8608501 L33.2908138,19.8180518 L32.6857143,19.8180518 L34.1082159,16.0652987 L34.8383298,16.0652987 L36.2667492,19.8180518 Z M33.8596664,18.28699 L35.0683859,18.28699 L34.4610673,16.6675829 L33.8596664,18.28699 Z M37.8638272,19.8180518 L37.8638272,16.0652987 L38.4474745,16.0652987 L38.4474745,19.8195882 L37.8638272,19.8180518 Z M41.9486185,16.0652987 C42.7800755,16.0652987 43.2290918,16.4494085 43.2290918,17.1515613 C43.2290918,17.7899518 42.759363,18.2132409 42.0233313,18.2401286 L43.2135575,19.8195882 L42.4908409,19.8195882 L41.3405601,18.2385921 L41.0446679,18.2385921 L41.0446679,19.8180518 L40.4610206,19.8180518 L40.4610206,16.0652987 L41.9486185,16.0652987 Z M41.0446679,16.6322448 L41.0446679,17.6893151 L41.9323444,17.6893151 C42.4020732,17.6893151 42.6217732,17.5118563 42.6217732,17.1515613 C42.6217732,16.7912663 42.3894978,16.6337812 41.9323444,16.6337812 L41.0446679,16.6322448 Z M47.717776,19.8180518 L45.1331579,19.8180518 L45.1331579,16.0652987 L45.7168052,16.0652987 L45.7168052,19.2457281 L47.717776,19.2457281 L47.717776,19.8180518 Z M49.3370458,19.8180518 L49.3370458,16.0652987 L49.9214329,16.0652987 L49.9214329,19.8195882 L49.3370458,19.8180518 Z M54.4367473,19.8180518 L52.4202422,17.101627 L52.4202422,19.8180518 L51.8373346,19.8180518 L51.8373346,16.0652987 L52.3625432,16.0652987 L54.3812675,18.7817235 L54.3812675,16.0652987 L54.9649148,16.0652987 L54.9649148,19.8195882 L54.4367473,19.8180518 Z M59.7243403,19.8180518 L57.0879411,19.8180518 L57.0879411,16.0652987 L59.6903127,16.0652987 L59.6903127,16.6337812 L57.6715884,16.6337812 L57.6715884,17.6447583 L59.620778,17.6447583 L59.620778,18.2132409 L57.6715884,18.2132409 L57.6715884,19.2511057 L59.7243403,19.2511057 L59.7243403,19.8180518 Z M63.0664423,17.6670367 L62.8156737,17.6324668 C62.3459448,17.5625588 62.0641076,17.4419483 62.0641076,17.1308194 C62.0641076,16.7874252 62.394767,16.5707872 62.877811,16.5707872 C63.2759747,16.5909307 63.6700099,16.6639948 64.0502837,16.7881934 L64.0502837,16.2051147 C63.672668,16.0757535 63.2783494,16.0065961 62.8807699,16 C62.0981352,16 61.4553094,16.4179115 61.4553094,17.171535 C61.4553094,17.8690785 61.9901345,18.1318096 62.5264391,18.2093998 L62.8082763,18.2493472 C63.3379233,18.3261692 63.6219798,18.4613758 63.6219798,18.7563722 C63.6219798,19.1020711 63.2521146,19.3110268 62.7772077,19.3110268 C62.2756705,19.3110268 61.7371467,19.0759516 61.4871178,18.9507318 L61.4871178,19.5591618 C61.8861045,19.7757137 62.3299809,19.887792 62.7801666,19.8857143 C63.5620616,19.8857143 64.2285714,19.4669754 64.2285714,18.7025968 C64.2307779,18.0058216 63.6523087,17.755382 63.0664423,17.6701096 L63.0664423,17.6670367 Z" id="BA-AIRLINES"></path>
                    <path d="M0,0.0133392759 L1.87763486,0.0133392759 L1.87763486,4.23744331 C2.53358686,3.53120275 3.62363561,3.105087 4.84827654,3.105087 C7.36855209,3.105087 9.29795317,4.97406776 9.29795317,7.61598546 C9.29795317,10.2445639 7.34340849,12.0876076 4.65526248,12.0876076 C2.08322072,12.0883482 0,10.3742513 0,7.08834299 L0,0.0133392759 Z M4.60423578,10.2712424 C6.24966215,10.2712424 7.3818634,9.17593967 7.3818634,7.59078905 C7.3818634,6.04417412 6.31400017,4.92293387 4.70702871,4.92293387 C3.11188952,4.92293387 1.94197288,6.01823664 1.94197288,7.66489614 C1.94197288,9.25597532 3.02240791,10.2712424 4.60423578,10.2712424 Z M14.4804916,3.19623872 C15.0560233,3.19651819 15.6311536,3.22669557 16.2035673,3.28664936 L16.2035673,5.01334452 C15.7147463,4.96146956 15.1105605,4.93923743 14.7762986,4.93923743 C13.1301327,4.93923743 12.654623,5.67363868 12.654623,7.19431613 L12.654623,11.9749644 L10.7769881,11.9749644 L10.7769881,6.31466499 C10.7769881,4.87179998 11.7413189,3.19623872 14.4804916,3.19623872 Z M21.4504438,12.07575 C18.6084781,12.07575 17.4252502,10.2586442 17.4252502,8.2740564 L17.4252502,3.19623872 L19.301406,3.19623872 L19.301406,7.93909236 C19.301406,8.94472555 19.430082,10.2593853 21.4460067,10.2593853 C23.3620964,10.2593853 23.5906073,8.9995648 23.5906073,7.93909236 L23.5906073,3.19623872 L25.4683101,3.19623872 L25.4683101,8.2740564 C25.4756374,10.2586442 24.2798376,12.07575 21.4504438,12.07575 L21.4504438,12.07575 Z M30.5294998,12.1142857 C29.3595831,12.1142857 28.0890921,11.908268 27.2016712,11.5599647 L27.2016712,9.91034091 C27.8672369,10.1941711 29.2079821,10.4513227 30.3815963,10.4513227 C31.5256298,10.4513227 32.2459198,10.1037604 32.2459198,9.44643054 C32.2459198,8.94398448 31.8598917,8.66015433 29.8927752,8.23477965 C28.2207262,7.8746192 27.1565606,7.25582501 27.1565606,5.70921008 C27.1565606,3.96917565 28.5194913,3.07989059 30.8600641,3.07989059 C31.6446921,3.07989059 32.8146088,3.18364051 33.7537959,3.45413138 L33.7537959,5.09041589 C32.9403267,4.89699639 31.78594,4.71988045 30.9244021,4.71988045 C29.882422,4.71988045 29.0852222,4.94220171 29.0852222,5.67363868 C29.0852222,6.17608473 29.6258094,6.42063812 31.3488851,6.78153964 C33.162182,7.15578044 34.178279,7.90277989 34.178279,9.37528773 C34.1694048,11.1086525 32.7288247,12.1142857 30.5294998,12.1142857 Z M38.9659151,12.1142857 C37.7952589,12.1142857 36.5255074,11.908268 35.6380865,11.5599647 L35.6380865,9.91034091 C36.3036522,10.1941711 37.6443974,10.4513227 38.8180116,10.4513227 C39.9627846,10.4513227 40.6830747,10.1037604 40.6830747,9.44643054 C40.6830747,8.94398448 40.2970465,8.66015433 38.3291905,8.23477965 C36.6578811,7.8746192 35.5929759,7.25582501 35.5929759,5.70921008 C35.5929759,3.96917565 36.9566461,3.07989059 39.2972189,3.07989059 C40.0811074,3.07989059 41.2517636,3.18364051 42.1902113,3.45413138 L42.1902113,5.09041589 C41.376742,4.89699639 40.2230948,4.71988045 39.3608174,4.71988045 C38.3195768,4.71988045 37.522377,4.94220171 37.522377,5.67363868 C37.522377,6.17608473 38.0622247,6.42063812 39.7853004,6.78153964 C41.5985973,7.15578044 42.6146943,7.90277989 42.6146943,9.37528773 C42.6050806,11.1086525 41.1645005,12.1142857 38.9659151,12.1142857 Z M51.4911225,9.84883203 L51.4911225,11.5532951 C50.707234,11.9008573 49.7813581,12.106875 48.6876118,12.106875 C45.4729293,12.106875 43.8267634,10.0452158 43.8267634,7.6352533 C43.8267634,4.96739812 45.6016054,3.07322095 48.3533499,3.07322095 C50.4239988,3.07322095 52.1603858,4.38788069 52.1603858,6.28205787 C52.1603858,7.59671762 51.3373029,8.35705634 49.626799,8.35705634 L45.819763,8.35705634 C46.11557,9.64577861 47.1701219,10.3579477 48.8939371,10.3579477 C49.524006,10.3483138 50.5526748,10.1941711 51.4911225,9.84883203 Z M49.626799,6.81785212 C50.0764256,6.81785212 50.3596608,6.54662017 50.3596608,6.17312045 C50.3596608,5.4898531 49.6134876,4.75545185 48.379233,4.75545185 C47.1449783,4.75545185 46.0771151,5.37424604 45.8071912,6.81785212 L49.626799,6.81785212 Z M55.5296274,0 L55.5296274,11.9468037 L53.6519926,11.9468037 L53.6519926,0 L55.5296274,0 Z M60.5834898,12.1142857 C59.4128337,12.1142857 58.1430822,11.908268 57.2556612,11.5599647 L57.2556612,9.91034091 C57.9212269,10.1941711 59.2612326,10.4513227 60.4318887,10.4513227 C61.5766618,10.4513227 62.2962123,10.1037604 62.2962123,9.44643054 C62.2962123,8.94398448 61.9109237,8.66015433 59.9430677,8.23477965 C58.2710187,7.8746192 57.206853,7.25582501 57.206853,5.70921008 C57.206853,3.96917565 58.5697837,3.07989059 60.9103565,3.07989059 C61.6949846,3.07989059 62.8656407,3.18364051 63.8040884,3.45413138 L63.8040884,5.09041589 C62.9906192,4.89699639 61.8362324,4.71988045 60.9746946,4.71988045 C59.933454,4.71988045 59.1362541,4.94220171 59.1362541,5.67363868 C59.1362541,6.17608473 59.6761019,6.42063812 61.3991776,6.78153964 C63.2124744,7.15578044 64.2285714,7.90277989 64.2285714,9.37528773 C64.2226553,11.1086525 62.7850333,12.1142857 60.5834898,12.1142857 L60.5834898,12.1142857 Z" id="BA-brussels"></path>
                </g>
                <g id="brussels_airlines_symbols" transform="translate(71.530016, 0.000000)" fill="#E5002B">
                    <path d="M2.07863505,19.5399387 C2.89879994,19.5399387 3.56366072,18.8750779 3.56366072,18.0549129 C3.56366072,17.2347506 2.89879994,16.5698765 2.07863505,16.5698765 C1.25847282,16.5698765 0.59359881,17.2347506 0.59359881,18.0549129 C0.59359881,18.8750779 1.25847282,19.5399387 2.07863505,19.5399387 Z" id="Vector"></path>
                    <path d="M17.907548,19.507767 C18.7099429,19.507767 19.3604067,18.8573031 19.3604067,18.0549083 C19.3604067,17.2525134 18.7099429,16.6020443 17.907548,16.6020443 C17.1051532,16.6020443 16.454684,17.2525134 16.454684,18.0549083 C16.454684,18.8573031 17.1051532,19.507767 17.907548,19.507767 Z" id="Vector"></path>
                    <path d="M9.99360859,20.5029764 C11.3456445,20.5029764 12.4416825,19.4069395 12.4416825,18.0549023 C12.4416825,16.7028731 11.3456445,15.6068388 9.99360859,15.6068388 C8.64157799,15.6068388 7.54553992,16.7028731 7.54553992,18.0549023 C7.54553992,19.4069395 8.64157799,20.5029764 9.99360859,20.5029764 Z" id="Vector"></path>
                    <path d="M2.0786343,12.21856 C3.22662455,12.21856 4.15725802,11.2879058 4.15725802,10.1399226 C4.15725802,8.99193149 3.22662455,8.06130118 2.0786343,8.06130118 C0.93063611,8.06130118 0,8.99193149 0,10.1399226 C0,11.2879058 0.93063611,12.21856 2.0786343,12.21856 Z" id="Vector"></path>
                    <path d="M17.9075588,12.5713968 C19.2504122,12.5713968 20.3390207,11.4827888 20.3390207,10.1399359 C20.3390207,8.79706969 19.2504122,7.70846432 17.9075588,7.70846432 C16.5646921,7.70846432 15.4760862,8.79706969 15.4760862,10.1399359 C15.4760862,11.4827888 16.5646921,12.5713968 17.9075588,12.5713968 Z" id="Vector"></path>
                    <path d="M9.99360719,12.9418756 C11.541088,12.9418756 12.7955527,11.6874111 12.7955527,10.1399306 C12.7955527,8.59245799 11.541088,7.33798556 9.99360719,7.33798556 C8.44613689,7.33798556 7.19166168,8.59245799 7.19166168,10.1399306 C7.19166168,11.6874111 8.44613689,12.9418756 9.99360719,12.9418756 Z" id="Vector"></path>
                    <path d="M17.9075434,4.45198122 C19.1369303,4.45198122 20.133534,3.45537758 20.133534,2.22599061 C20.133534,0.99660893 19.1369303,0 17.9075434,0 C16.6781617,0 15.6815528,0.99660893 15.6815528,2.22599061 C15.6815528,3.45537758 16.6781617,4.45198122 17.9075434,4.45198122 Z" id="Vector"></path>
                    <path d="M9.99360969,3.84489115 C10.8877038,3.84489115 11.6125115,3.12008342 11.6125115,2.22598935 C11.6125115,1.33189528 10.8877038,0.60708754 9.99360969,0.60708754 C9.09951569,0.60708754 8.37470791,1.33189528 8.37470791,2.22598935 C8.37470791,3.12008342 9.09951569,3.84489115 9.99360969,3.84489115 Z" id="Vector"></path>
                    <path d="M2.07862522,3.67885221 C2.88101982,3.67885221 3.53148341,3.02838866 3.53148341,2.22599414 C3.53148341,1.42359961 2.88101982,0.77313078 2.07862522,0.77313078 C1.27623062,0.77313078 0.62576174,1.42359961 0.62576174,2.22599414 C0.62576174,3.02838866 1.27623062,3.67885221 2.07862522,3.67885221 Z" id="Vector"></path>
                </g>
            </g>
        </g>
    </g>
</svg><strong class="text-[11px]">Brussels Airlines</strong><span class="block">SN</span> </label>
        </div>
        <div class="radio carrier-element w-1/3 mx-1">
          <input type="radio" id="EN" name="carrier" value="EN" />
          <label for="EN" class="border-grey block flex h-32 w-32 flex-col items-center gap-2 border border-2 border-solid bg-white px-4 py-3 text-center"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Generator: Adobe Illustrator 12.0.0, SVG Export Plug-In  -->
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" class="mt-[10px] mb-[9px]" version="1.1"  viewBox="-0.5039063 -0.8779297 455.34863 83.84375" enable-background="new -0.5039063 -0.8779297 481 102" xml:space="preserve" id="svg2"<metadata id="metadata16"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/></rdf:RDF></metadata>
<defs id="defs4" >
</defs>
<polygon clip-rule="evenodd" points="479.74805,0 479.74805,101 0,101 0,0 0,0 " id="polygon6" style="opacity:0;fill:#ffffff;fill-rule:evenodd" transform="translate(-12.4365, -9.25391)"/>
<path clip-rule="evenodd" d="m 125.52735,63.206055 -12.46094,19.402344 h 7.6543 l 12.2832,-19.402344 h -7.47656 l 0,0 z m 26.34619,0 v 19.402344 h 6.40771 V 63.206055 h -6.40771 l 0,0 z m 18.86816,0 v 19.402344 h -5.69726 V 63.206055 h 5.69726 l 0,0 z m 14.06299,0 v 19.402344 h -5.51855 V 63.206055 h 5.51855 l 0,0 z m 50.19922,0 c -1.95801,4.449219 -4.98535,7.476562 -7.12207,9.257812 -6.76318,4.804688 -14.95166,4.804688 -20.2915,4.804688 h -14.2417 v 5.339844 h 17.26611 c 7.12061,0 14.41992,-1.780274 19.04834,-4.804688 6.40723,-4.09375 9.78906,-9.613281 11.57031,-14.597656 h -6.22949 l 0,0 z m 9.43359,0 c 1.42383,10.68164 10.85938,19.759766 22.6084,19.759766 11.92578,0 21.18262,-9.078125 22.7832,-19.759766 h -5.69433 c -1.60352,9.43457 -9.43652,14.774414 -17.08887,14.774414 -8.01269,0 -15.4873,-6.051758 -16.91113,-14.774414 h -5.69727 l 0,0 z m 53.93653,0 v 19.402344 h -5.69532 V 63.206055 h 5.69532 l 0,0 z m 2.84961,0 c 1.42382,10.68164 10.85644,19.759766 22.60547,19.759766 11.92871,0 21.18261,-9.078125 22.78613,-19.759766 h -5.69727 c -1.60058,9.43457 -9.43359,14.774414 -16.91113,14.774414 -8.1875,0 -15.66504,-6.051758 -17.08887,-14.774414 h -5.69433 l 0,0 z m 54.64746,0 v 19.402344 h -5.51758 V 63.206055 h 5.51758 l 0,0 z m 29.5498,0 v 19.402344 h -5.69531 V 63.206055 h 5.69531 l 0,0 z m 29.3711,0 v 19.402344 h -5.51661 V 63.206055 h 5.51661 l 0,0 z m 11.21484,0 v 19.402344 h -5.51758 V 63.206055 h 5.51758 l 0,0 z m 12.63769,0 v 19.402344 h -5.5166 V 63.206055 h 5.5166 l 0,0 z m 16.2002,0 v 19.402344 h -5.69531 V 63.206055 h 5.69531 l 0,0 z" id="path8" inkscape:connector-curvature="0" style="fill:#021a31;fill-rule:evenodd"/>
<path clip-rule="evenodd" d="m 133.00391,63.206055 0.35596,-0.53418 h 18.51367 v 0.53418 h 6.40771 V 25.468262 h -6.40771 -1.9585 l -24.38769,37.737793 h 7.47656 l 0,0 z m 32.04053,0 V 38.819336 h 5.69726 v 24.386719 h -5.69726 l 0,0 z m 14.2417,0 V 38.819336 h 5.51855 v 6.407715 c 2.84717,-6.230469 7.83203,-7.120605 12.46045,-7.476562 V 43.625 c -3.9165,0.355469 -7.29932,1.779297 -9.43506,4.450684 -1.95801,2.313965 -3.02539,5.51709 -3.02539,8.899902 v 6.230469 h -5.51855 l 0,0 z m 61.94726,0 c 1.42383,-3.916016 1.78028,-7.476563 1.78028,-9.791016 0,-7.11914 -3.02735,-18.334472 -13.35059,-24.743652 -4.62842,-3.025879 -11.92774,-4.805176 -19.04834,-4.805176 h -3.73779 l 0.17871,4.983887 h 0.53467 c 8.72168,0 14.24023,1.067871 19.40283,4.450683 6.23047,4.628418 10.14648,11.749024 10.14648,19.75879 0,3.916015 -0.88965,7.297851 -2.13574,10.146484 h 6.22949 l 0,0 z m 8.90137,0 c -0.17969,-0.890625 -0.35742,-1.958008 -0.35742,-2.848633 0,-11.569824 9.43652,-18.157715 17.26855,-18.157715 7.65235,0 17.44336,6.054199 17.44336,17.624512 0,1.245117 -0.17773,2.314453 -0.35449,3.381836 h 5.69433 c 0.17969,-1.067383 0.17969,-2.136719 0.17969,-3.204102 0,-11.926269 -9.9707,-22.963379 -22.96289,-22.963379 -11.57129,0 -22.78613,9.434571 -22.78613,23.318848 0,1.069336 0,1.958008 0.17773,2.848633 h 5.69727 l 0,0 z m 42.54394,0 V 25.468262 h 5.69532 v 37.737793 h -5.69532 l 0,0 z m 14.23926,0 c -0.17773,-0.890625 -0.35449,-1.958008 -0.35449,-2.848633 0,-11.569824 9.43359,-18.157715 17.44336,-18.157715 7.47754,0 17.26855,6.054199 17.26855,17.624512 0,1.245117 -0.17968,2.314453 -0.35742,3.381836 h 5.69727 c 0.17676,-1.067383 0.17676,-2.136719 0.17676,-3.204102 0,-11.926269 -9.96778,-22.963379 -22.9629,-22.963379 -11.57128,0 -22.78515,9.434571 -22.78515,23.318848 0,1.069336 0,1.958008 0.17969,2.848633 h 5.69433 l 0,0 z m 43.43555,0 V 38.819336 h 5.51758 v 5.161133 c 2.49316,-3.916016 6.94336,-6.22998 11.92578,-6.22998 6.40918,0 11.74902,3.026855 14.77637,8.366699 3.38183,-5.518067 8.54394,-8.366699 14.77636,-8.366699 10.32227,0 17.44239,7.299316 17.44239,18.869628 v 6.585938 h -5.51661 v -5.874024 c 0,-9.435058 -4.62793,-14.596191 -11.92578,-14.596191 -7.47851,0 -11.92871,5.161133 -11.92871,14.596191 v 5.874024 h -5.69531 v -5.874024 c 0,-9.435058 -4.4502,-14.596191 -11.92871,-14.596191 -7.29785,0 -11.92578,5.161133 -11.92578,14.596191 v 5.874024 h -5.51758 l 0,0 z m 70.13574,0 V 38.819336 h 5.51758 v 24.386719 h -5.51758 l 0,0 z m 12.63867,0 V 25.468262 h 5.5166 v 13.351074 h 5.69727 v 5.161133 h -5.69727 v 19.225586 h -5.5166 l 0,0 z m 16.02149,0 V 38.819336 h 5.69531 v 24.386719 h -5.69531 l 0,0 z M 136.91993,57.332031 151.87354,34.012696 v 23.319335 h -14.95361 l 0,0 z M 449.14942,25.468262 h 5.69531 v 8.009766 h -5.69531 v -8.009766 l 0,0 z m -28.66016,0 h 5.51758 v 8.009766 h -5.51758 v -8.009766 l 0,0 z M 165.04444,23.510254 h 5.69726 v 9.967774 h -5.69726 v -9.967774 l 0,0 z" id="path10" inkscape:connector-curvature="0" style="fill:#021a31;fill-rule:evenodd"/>
<path clip-rule="evenodd" d="M 72.836424,-0.8779297 38.657713,38.285156 H -0.50390771 L 33.673827,-0.8779297 h 39.162597 l 0,0 z m 0,81.8857427 L 38.657713,42.022461 H -0.50390771 L 33.673827,81.007813 h 39.162597 l 0,0 z M 117.33887,40.599121 79.778319,18.88086 42.217772,40.243164 79.422363,61.782227 117.33887,40.599121 l 0,0 z" id="path12" inkscape:connector-curvature="0" style="fill:#008e8f;fill-rule:evenodd"/>
</svg><strong class="text-[11px]">Air Dolomiti </strong><span class="block">EN</span></label>
        </div>
      </div>
    </div>
    <div class="form-label text-center font-bold">
      <label for="carrier">Zakres dat: </label>
    </div>
    <div class="date-flex-container flex flex-row flex-nowrap border-4 justify-between px-24">
      <div class="date-element">
        <label for="date-from"><strong>OD: </strong></label>
        <input type="date" name="date-from" id="date-from" required="required" aria-required="true" oninvalid="this.setCustomValidity('Proszę wybrać datę początkową')" oninput="this.setCustomValidity('')" value="" />
      </div>
      <div class="date-element">
        <label for="date-to"><strong>DO: </strong></label>
        <input type="date" name="date-to" id="date-to" required />
      </div>
    </div>
    <div class="form-label text-center font-bold">
      <label for="date-from">Lub wybierz sezon: </label>
    </div>
    <div class="season-flex-container">
      <div class="season-element">
        <input type="radio" id="W24" name="season" value="W24" />
        <label for="W24">W24</label>
      </div>
      <div class="season-element">
        <input type="radio" id="S25" name="season" value="S25" />
        <label for="S25">S25</label>
      </div>
      <div class="season-element">
        <input type="radio" id="W25" name="season" value="W25" />
        <label for="W25">W25</label>
      </div>
    </div>
    <div class="separation-container">
      <!-- Hidden input for unchecked checkbox -->
      <input type="checkbox" id="separate" name="separate" checked />
      <label for="separate">Odseparuj dni rozkładu</label>
    </div>
    <button type="submit" id="downloadButton" class="download-btn" id="downloadBtn">Pobierz rozkład</button>
  </form>
  <progress id="progressBar" value="0" max="100"></progress>
  <span id="progressText">0%</span>
</div>

      </body>

    <script>
        const seasonDates = {
            'W24': {
                from: '2024-10-27',
                to: '2025-03-29'
            },
            'S25': {
                from: '2025-03-30',
                to: '2025-10-25'
            },
            'W25': {
                from: '2025-10-26',
                to: '2026-03-28'
            }
        };

        const dateFrom = document.getElementById('date-from');
        const dateTo = document.getElementById('date-to');
        const radioButtons = document.querySelectorAll('input[name="season"]');

        radioButtons.forEach(radio => {
            radio.addEventListener('change', (e) => {
                if (e.target.checked) {
                    const season = seasonDates[e.target.value];
                    dateFrom.value = season.from;
                    dateTo.value = season.to;
                }
            });
        });

        dateFrom.addEventListener('change', () => {
            radioButtons.forEach(radio => radio.checked = false);
        });
        dateTo.addEventListener('change', ()=>{
            radioButtons.forEach(radio => radio.checked = false);
        });

        async function handleDownload(event) {
          event.preventDefault();
      
          // Get date inputs and validate them first
          const dateFrom = document.getElementById('date-from');
          const dateTo = document.getElementById('date-to');
          
          // Reset any previous validation messages
          dateFrom.setCustomValidity('');
          dateTo.setCustomValidity('');
          
          // Check if dates are empty
          if (!dateFrom.value || !dateTo.value) {
              if (!dateFrom.value) {
                  dateFrom.setCustomValidity('Proszę wybrać datę początkową');
                  dateFrom.reportValidity();
              }
              if (!dateTo.value) {
                  dateTo.setCustomValidity('Proszę wybrać datę końcową');
                  dateTo.reportValidity();
              }
              return false;
          }
          
          // Validate date range
          if (dateTo.value < dateFrom.value) {
              dateTo.setCustomValidity('Data końcowa nie może być wcześniejsza niż początkowa');
              dateTo.reportValidity();
              return false;
          }
      
          const loaderContainer = document.querySelector('.loader-container');
          const downloadBtn = document.getElementById('downloadButton');
          const progressBar = document.getElementById('progressBar');
          const progressText = document.getElementById('progressText');
      
          // Create event source before starting the download
          let eventSource = null;
      
          try {
              // Show loader and disable button
              loaderContainer.style.display = 'flex';
              downloadBtn.disabled = true;
      
              // Setup SSE connection first
              eventSource = new EventSource('/progress');
              eventSource.onmessage = (event) => {
                  const progress = parseInt(event.data);
                  progressBar.value = progress;
                  progressText.textContent = `${progress}%`;
              };
      
              // Gather form data and serialize it
              const form = document.getElementById('downloadForm');
              const formData = new FormData(form);
              const formDataString = new URLSearchParams(formData).toString();
      
              // Make the POST request with the serialized form data
              const response = await fetch('/csv', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/x-www-form-urlencoded',
                  },
                  body: formDataString,
              });
      
              if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
              }
      
              // Get the filename from the Content-Disposition header
              const contentDisposition = response.headers.get('Content-Disposition');
              let filename = 'data.csv';
              if (contentDisposition) {
                  const filenameMatch = contentDisposition.match(/filename="(.+)"/);
                  if (filenameMatch) {
                      filename = filenameMatch[1];
                  }
              }
      
              // Convert the response to a blob
              const blob = await response.blob();
      
              // Create a download link and trigger it
              const url = window.URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url;
              a.download = filename;
              document.body.appendChild(a);
              a.click();
              window.URL.revokeObjectURL(url);
              a.remove();
      
          } catch (error) {
              console.error('Download failed:', error);
              alert('Nie udało się pobrać pliku. Spróbuj ponownie.');
          } finally {
              // Clean up SSE connection
              if (eventSource) {
                  eventSource.close();
              }
      
              // Reset UI
              loaderContainer.style.display = 'none';
              downloadBtn.disabled = false;
              downloadBtn.textContent = 'POBIERZ ROZKŁAD';
              progressBar.value = 0;
              progressText.textContent = '0%';
          }
      
          return false;
      }
      
      // Add event listener
      document.getElementById('downloadButton').addEventListener('click', handleDownload);
    </script>
</body>
</html>